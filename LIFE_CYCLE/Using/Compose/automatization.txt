

		Автоматизация с помощью Compose

				Compose предназанчен для быстрой настройки и запуска различных вариантов
				сред разработки. Compose использует YAML-файлы для кофигурации.

				Установить:

						http://docs.docker.com/compose/install/

				Подробная информация:

						http://docs.docker.com/compose/reference/

				Создадим файл docker-compose.yml:

						identidock: 							# Имя создаваемого окнтейнера
						  build: .								# Говорит о том, что образ должен быть создан из Dockerfile
						  ports: - "5000:5000"		# Альтернатива -p в docker run 
						  environment: ENV: DEV		# Альтернатива -e в docker run
						  volumes: - ./app:/app		# Альтернатива -v в docker run

							В файле YAML можно объявлять много переменных из docker run

				После создания этого файла, можно запустить Compose:

						docker-compose up

						Проверим из другого терминала:
						curl localhost:5000


				Для переключения между отладочным режимом и режимом разработки
				можно либо редактировать файл YAML, либо создать несколько файлов
				YAML, запуская их через флаг -f в команде docker-compose 
				или через переменную среды COMPOSE_FILE.


				Порядок работы Compose (часто используемые команды)

						Много команд имеют аналоги в Docker

						up - Запуск всех контейнеров, опрееделнных в Compose-файле.
						build - Пересоздание всех образов, созданых из Dockerfile.
										(При необходимости обновления образов)
						rm - Удлаение остановленных контейнеров.
								 (Аргумент -v - удалить все тома, управляемы Docker)

						Проверка состояния приложений:
							ps - вывод информации о сотсоянии контейнеров.
							logs - Вывод журнальных записей
						
						run - Одноразовый запуск контейнера с выполнением одной команды.
						stop - Остановка контейнеров без удаления

				После внесения изменений в исхдный код следует выполнить:
						1) docker-compose build
						2) docker-compose up -d

						При этом создастся новый образ и заменит предшествующий контейнер.

				Если создание нового образа не требуется, но внесены изменение в YAML,
				то следует выполнить команду:

						docker-compose up -d

						Это заменит контейнер на такой же, но с новыми настройками.

				Если нужно остановить весь механизм Compose и заново создать все контейнеры,
				то следует использовать флаг --force-recreate

				Для остановки:

						docker-compose stop

				Для удаления:

						docker-compose rm